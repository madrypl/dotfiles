" Indexer

set completeopt=longest,menuone

function! RefreshIndexOnSave()
    if has("cscope") && filereadable('cscope.out')
        call RefreshCScope()
    endif
    if filereadable('tags')
        call RefreshCTags(@%)
    endif
    redraw!
endfunction

function! RebuildIndex()
    silent !rm -f cscope.* tags
    call RefreshCScope()
    call RefreshCTags('')
    redraw!
endfunction

" configure wildmenu to ignore some not wanted files
set wildignore+=*.o,*.d,*.elf

source ~/.vimrc-ycm

" add yaml stuffs
au! BufNewFile,BufReadPost *.{yaml,yml} set filetype=yaml
autocmd FileType yaml setlocal ts=2 sts=2 sw=2 expandtab

" refresh cscope and ctags on C source save
autocmd BufWritePost *.[ch] call RefreshIndexOnSave()

" remove trailing spaces in source codes
autocmd FileType c,cpp,yml,yaml,lua autocmd BufWritePre <buffer> %s/\s\+$//e


